!function(a,b){var c,d,e,f=wp.customize;f.Setting=f.Value.extend({initialize:function(a,b,c){var d=this;f.Value.prototype.initialize.call(d,b,c),d.id=a,d.transport=d.transport||"refresh",d._dirty=c.dirty||!1,d.notifications=new f.Values({defaultConstructor:f.Notification}),d.bind(d.preview)},preview:function(){var b,a=this;b=a.transport,"postMessage"!==b||f.state("previewerAlive").get()||(b="refresh"),"postMessage"===b?a.previewer.send("setting",[a.id,a()]):"refresh"===b&&a.previewer.refresh()},findControls:function(){var a=this,b=[];return f.control.each(function(c){_.each(c.settings,function(d){d.id===a.id&&b.push(c)})}),b}}),f._latestRevision=0,f._lastSavedRevision=0,f._latestSettingRevisions={},f.bind("change",function(b){f._latestRevision+=1,f._latestSettingRevisions[b.id]=f._latestRevision}),f.bind("ready",function(){f.bind("add",function(b){b._dirty&&(f._latestRevision+=1,f._latestSettingRevisions[b.id]=f._latestRevision)})}),f.dirtyValues=function(b){var c={};return f.each(function(a){var d;a._dirty&&(d=f._latestSettingRevisions[a.id],f.state("changesetStatus").get()&&b&&b.unsaved&&(_.isUndefined(d)||d<=f._lastSavedRevision)||(c[a.id]=a.get()))}),c},f.requestChangesetUpdate=function(c){var d,e,h,g={};return d=new b.Deferred,c&&_.extend(g,c),_.each(f.dirtyValues({unsaved:!0}),function(a,b){c&&null===c[b]||(g[b]=_.extend({},g[b]||{},{value:a}))}),_.isEmpty(g)?(d.resolve({}),d.promise()):(f.state("processing").set(f.state("processing").get()+1),d.always(function(){f.state("processing").set(f.state("processing").get()-1)}),f.trigger("changeset-save",g),h=f.previewer.query({excludeCustomizedSaved:!0}),delete h.customized,_.extend(h,{nonce:f.settings.nonce.save,customize_theme:f.settings.theme.stylesheet,customize_changeset_data:JSON.stringify(g)}),e=wp.ajax.post("customize_save",h),e.done(function(b){var c={};f._lastSavedRevision=Math.max(f._latestRevision,f._lastSavedRevision),f.state("changesetStatus").set(b.changeset_status),d.resolve(b),f.trigger("changeset-saved",b),b.setting_validities&&_.each(b.setting_validities,function(a,b){!0===a&&_.isObject(g[b])&&!_.isUndefined(g[b].value)&&(c[b]=g[b].value)}),f.previewer.send("changeset-saved",_.extend({},b,{saved_changeset_values:c}))}),e.fail(function(b){d.reject(b),f.trigger("changeset-error",b)}),e.always(function(a){a.setting_validities&&f._handleSettingValidities({settingValidities:a.setting_validities})}),d.promise())},f.utils.bubbleChildValueChanges=function(a,c){b.each(c,function(b,c){a[c].bind(function(b,c){a.parent&&b!==c&&a.parent.trigger("change",a)})})},d=function(a){var b,c,d,e;b=this,a=a||{},d=function(){var a;a=(b.extended(f.Panel)||b.extended(f.Section))&&b.expanded&&b.expanded()?b.contentContainer:b.container,e=a.find(".control-focus:first"),0===e.length&&(e=a.find("input, select, textarea, button, object, a[href], [tabindex]").filter(":visible").first()),e.focus()},a.completeCallback?(c=a.completeCallback,a.completeCallback=function(){d(),c()}):a.completeCallback=d,f.state("paneVisible").set(!0),b.expand?b.expand(a):a.completeCallback()},f.utils.prioritySort=function(a,b){return a.priority()===b.priority()&&"number"==typeof a.params.instanceNumber&&"number"==typeof b.params.instanceNumber?a.params.instanceNumber-b.params.instanceNumber:a.priority()-b.priority()},f.utils.isKeydownButNotEnterEvent=function(a){return"keydown"===a.type&&13!==a.which},f.utils.areElementListsEqual=function(a,c){return a.length===c.length&&-1===_.indexOf(_.map(_.zip(a,c),function(a){return b(a[0]).is(a[1])}),!1)},e=function(){var a,b,c;return a=document.createElement("div"),b={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},c=_.find(_.keys(b),function(b){return!_.isUndefined(a.style[b])}),c?b[c]:null}(),c=f.Class.extend({defaultActiveArguments:{duration:"fast",completeCallback:b.noop},defaultExpandedArguments:{duration:"fast",completeCallback:b.noop},containerType:"container",defaults:{title:"",description:"",priority:100,type:"default",content:null,active:!0,instanceNumber:null},initialize:function(a,c){var d=this;d.id=a,c=c||{},c.params=_.defaults(c.params||{},d.defaults),b.extend(d,c),d.templateSelector="customize-"+d.containerType+"-"+d.params.type,d.container=b(d.params.content),0===d.container.length&&(d.container=b(d.getContainer())),d.headContainer=d.container,d.contentContainer=d.getContent(),d.container=d.container.add(d.contentContainer),d.deferred={embedded:new b.Deferred},d.priority=new f.Value,d.active=new f.Value,d.activeArgumentsQueue=[],d.expanded=new f.Value,d.expandedArgumentsQueue=[],d.active.bind(function(a){var c=d.activeArgumentsQueue.shift();c=b.extend({},d.defaultActiveArguments,c),a=a&&d.isContextuallyActive(),d.onChangeActive(a,c)}),d.expanded.bind(function(a){var c=d.expandedArgumentsQueue.shift();c=b.extend({},d.defaultExpandedArguments,c),d.onChangeExpanded(a,c)}),d.deferred.embedded.done(function(){d.attachEvents()}),f.utils.bubbleChildValueChanges(d,["priority","active"]),d.priority.set(d.params.priority),d.active.set(d.params.active),d.expanded.set(!1)},ready:function(){},_children:function(a,b){var c=this,d=[];return f[b].each(function(b){b[a].get()===c.id&&d.push(b)}),d.sort(f.utils.prioritySort),d},isContextuallyActive:function(){throw new Error("Container.isContextuallyActive() must be overridden in a subclass.")},onChangeActive:function(a,c){var g,h,d=this,e=d.headContainer;if(c.unchanged)return void(c.completeCallback&&c.completeCallback());g="resolved"===f.previewer.deferred.active.state()?c.duration:0,d.extended(f.Panel)&&(f.panel.each(function(a){a!==d&&a.expanded()&&(h=a,g=0)}),a||_.each(d.sections(),function(a){a.collapse({duration:0})})),b.contains(document,e)?a?e.stop(!0,!0).slideDown(g,c.completeCallback):d.expanded()?d.collapse({duration:g,completeCallback:function(){e.stop(!0,!0).slideUp(g,c.completeCallback)}}):e.stop(!0,!0).slideUp(g,c.completeCallback):(e.toggle(a),c.completeCallback&&c.completeCallback())},_toggleActive:function(a,b){var c=this;return b=b||{},a&&this.active.get()||!a&&!this.active.get()?(b.unchanged=!0,c.onChangeActive(c.active.get(),b),!1):(b.unchanged=!1,this.activeArgumentsQueue.push(b),this.active.set(a),!0)},activate:function(a){return this._toggleActive(!0,a)},deactivate:function(a){return this._toggleActive(!1,a)},onChangeExpanded:function(){throw new Error("Must override with subclass.")},_toggleExpanded:function(a,b){var d,c=this;return b=b||{},d=b.completeCallback,!(a&&!c.active())&&(f.state("paneVisible").set(!0),b.completeCallback=function(){d&&d.apply(c,arguments),a?c.container.trigger("expanded"):c.container.trigger("collapsed")},a&&c.expanded.get()||!a&&!c.expanded.get()?(b.unchanged=!0,c.onChangeExpanded(c.expanded.get(),b),!1):(b.unchanged=!1,c.expandedArgumentsQueue.push(b),c.expanded.set(a),!0))},expand:function(a){return this._toggleExpanded(!0,a)},collapse:function(a){return this._toggleExpanded(!1,a)},_animateChangeExpanded:function(a){if(!e)return void(a&&a());var g,h,c=this,d=c.contentContainer,f=d.closest(".wp-full-overlay");g=f.add(d),(_.isUndefined(c.panel)||""===c.panel())&&(g=g.add("#customize-info, .customize-pane-parent")),h=function(c){2===c.eventPhase&&b(c.target).is(d)&&(d.off(e,h),g.removeClass("busy"),a&&a())},d.on(e,h),g.addClass("busy"),_.defer(function(){var a=d.closest(".wp-full-overlay-sidebar-content"),b=a.scrollTop(),e=d.data("previous-scrollTop")||0,f=c.expanded();f&&0<b?(d.css("top",b+"px"),d.data("previous-scrollTop",b)):!f&&0<b+e&&(d.css("top",e-b+"px"),a.scrollTop(e))})},focus:d,getContainer:function(){var a,c=this;return a=0!==b("#tmpl-"+c.templateSelector).length?wp.template(c.templateSelector):wp.template("customize-"+c.containerType+"-default"),a&&c.container?b.trim(a(c.params)):"<li></li>"},getContent:function(){var a=this,b=a.container,c=b.find(".accordion-section-content, .control-panel-content").first(),d="sub-"+b.attr("id"),e=d,f=b.attr("aria-owns");return f&&(e=e+" "+f),b.attr("aria-owns",e),c.detach().attr({id:d,class:"customize-pane-child "+c.attr("class")+" "+b.attr("class")})}}),f.Section=c.extend({containerType:"section",defaults:{title:"",description:"",priority:100,type:"default",content:null,active:!0,instanceNumber:null,panel:null,customizeAction:""},initialize:function(a,d){var e=this;c.prototype.initialize.call(e,a,d),e.id=a,e.panel=new f.Value,e.panel.bind(function(a){b(e.headContainer).toggleClass("control-subsection",!!a)}),e.panel.set(e.params.panel||""),f.utils.bubbleChildValueChanges(e,["panel"]),e.embed(),e.deferred.embedded.done(function(){e.ready()})},embed:function(){var a,c=this,d=b("#customize-theme-controls");a=function(a){var e;a?f.panel(a,function(a){a.deferred.embedded.done(function(){e=a.contentContainer,c.headContainer.parent().is(e)||e.append(c.headContainer),c.contentContainer.parent().is(c.headContainer)||d.append(c.contentContainer),c.deferred.embedded.resolve()})}):(e=b(".customize-pane-parent"),c.headContainer.parent().is(e)||e.append(c.headContainer),c.contentContainer.parent().is(c.headContainer)||d.append(c.contentContainer),c.deferred.embedded.resolve())},c.panel.bind(a),a(c.panel.get())},attachEvents:function(){var a,b,c=this;c.container.hasClass("cannot-expand")||(c.container.find(".accordion-section-title, .customize-section-back").on("click keydown",function(a){f.utils.isKeydownButNotEnterEvent(a)||(a.preventDefault(),c.expanded()?c.collapse():c.expand())}),c.container.find(".customize-section-title .customize-help-toggle").on("click",function(){a=c.container.find(".section-meta"),a.hasClass("cannot-expand")||(b=a.find(".customize-section-description:first"),b.toggleClass("open"),b.slideToggle(),b.attr("aria-expanded",function(a,b){return"true"===b?"false":"true"}))}))},isContextuallyActive:function(){var a=this,b=a.controls(),c=0;return _(b).each(function(a){a.active()&&(c+=1)}),0!==c},controls:function(){return this._children("section","control")},onChangeExpanded:function(a,c){var k,d=this,e=d.headContainer.closest(".wp-full-overlay-sidebar-content"),g=d.contentContainer,h=d.headContainer.closest(".wp-full-overlay"),i=g.find(".customize-section-back"),j=d.headContainer.find(".accordion-section-title").first();a&&!g.hasClass("open")?(k=c.unchanged?c.completeCallback:b.proxy(function(){d._animateChangeExpanded(function(){j.attr("tabindex","-1"),i.attr("tabindex","0"),i.focus(),g.css("top",""),e.scrollTop(0),c.completeCallback&&c.completeCallback()}),g.addClass("open"),h.addClass("section-open"),f.state("expandedSection").set(d)},this),c.allowMultiple||f.section.each(function(a){a!==d&&a.collapse({duration:c.duration})}),d.panel()?f.panel(d.panel()).expand({duration:c.duration,completeCallback:k}):(f.panel.each(function(a){a.collapse()}),k())):!a&&g.hasClass("open")?(d._animateChangeExpanded(function(){i.attr("tabindex","-1"),j.attr("tabindex","0"),j.focus(),g.css("top",""),c.completeCallback&&c.completeCallback()}),g.removeClass("open"),h.removeClass("section-open"),d===f.state("expandedSection").get()&&f.state("expandedSection").set(!1)):c.completeCallback&&c.completeCallback()}}),f.ThemesSection=f.Section.extend({currentTheme:"",overlay:"",template:"",screenshotQueue:null,$window:b(window),initialize:function(){return this.$customizeSidebar=b(".wp-full-overlay-sidebar-content:first"),f.Section.prototype.initialize.apply(this,arguments)},ready:function(){var a=this;a.overlay=a.container.find(".theme-overlay"),a.template=wp.template("customize-themes-details-view"),a.container.on("keydown",function(b){a.overlay.find(".theme-wrap").is(":visible")&&(39===b.keyCode&&a.nextTheme(),37===b.keyCode&&a.previousTheme(),27===b.keyCode&&(a.closeDetails(),b.stopPropagation()))}),_.bindAll(this,"renderScreenshots")},isContextuallyActive:function(){return this.active()},attachEvents:function(){var a=this;a.container.find(".change-theme, .customize-theme").on("click keydown",function(b){f.utils.isKeydownButNotEnterEvent(b)||(b.preventDefault(),a.expanded()?a.collapse():a.expand())}),a.container.on("click keydown",".left",function(b){f.utils.isKeydownButNotEnterEvent(b)||(b.preventDefault(),a.previousTheme())}),a.container.on("click keydown",".right",function(b){f.utils.isKeydownButNotEnterEvent(b)||(b.preventDefault(),a.nextTheme())}),a.container.on("click keydown",".theme-backdrop, .close",function(b){f.utils.isKeydownButNotEnterEvent(b)||(b.preventDefault(),a.closeDetails())});var b=_.throttle(_.bind(a.renderScreenshots,this),100);a.container.on("input","#themes-filter",function(c){var d,e=c.currentTarget.value.toLowerCase().trim().replace("-"," "),f=a.controls();_.each(f,function(a){a.filter(e)}),b(),d=a.container.find("li.customize-control:visible").length,a.container.find(".theme-count").text(d)}),f.bind("ready",function(){_.each(a.controls().slice(0,3),function(a){var b,c=a.params.theme.screenshot[0];c&&(b=new Image,b.src=c)})})},onChangeExpanded:function(a,b){if(b.unchanged)return void(b.completeCallback&&b.completeCallback());var c=this,d=c.contentContainer,e=d.closest(".wp-full-overlay"),g=d.closest(".wp-full-overlay-sidebar-content"),h=d.find(".customize-theme"),i=c.headContainer.find(".change-theme");a&&!d.hasClass("current-panel")?(f.section.each(function(a){a!==c&&a.collapse({duration:b.duration})}),f.panel.each(function(a){a.collapse({duration:0})}),c._animateChangeExpanded(function(){i.attr("tabindex","-1"),h.attr("tabindex","0"),h.focus(),d.css("top",""),g.scrollTop(0),b.completeCallback&&b.completeCallback()}),e.addClass("in-themes-panel"),d.addClass("current-panel"),_.delay(c.renderScreenshots,10),c.$customizeSidebar.on("scroll.customize-themes-section",_.throttle(c.renderScreenshots,300))):!a&&d.hasClass("current-panel")&&(c._animateChangeExpanded(function(){i.attr("tabindex","0"),h.attr("tabindex","-1"),i.focus(),d.css("top",""),b.completeCallback&&b.completeCallback()}),e.removeClass("in-themes-panel"),d.removeClass("current-panel"),c.$customizeSidebar.off("scroll.customize-themes-section"))},renderScreenshots:function(){var a=this;null===a.screenshotQueue&&(a.screenshotQueue=a.controls()),a.screenshotQueue.length&&(a.screenshotQueue=_.filter(a.screenshotQueue,function(b){var c=b.container.find(".theme-screenshot"),d=c.find("img");if(!d.length)return!1;if(d.is(":hidden"))return!0;var e=a.$window.scrollTop(),f=e+a.$window.height(),g=d.offset().top,h=c.height(),i=g+h,j=3*h,k=i>=e-j&&g<=f+j;return k&&b.container.trigger("render-screenshot"),!k}))},nextTheme:function(){var a=this;a.getNextTheme()&&a.showDetails(a.getNextTheme(),function(){a.overlay.find(".right").focus()})},getNextTheme:function(){var a,b;return a=f.control("theme_"+this.currentTheme),b=a.container.next("li.customize-control-theme"),!!b.length&&(b=b[0].id.replace("customize-control-",""),a=f.control(b),a.params.theme)},previousTheme:function(){var a=this;a.getPreviousTheme()&&a.showDetails(a.getPreviousTheme(),function(){a.overlay.find(".left").focus()})},getPreviousTheme:function(){var a,b;return a=f.control("theme_"+this.currentTheme),b=a.container.prev("li.customize-control-theme"),!!b.length&&(b=b[0].id.replace("customize-control-",""),a=f.control(b),a.params.theme)},updateLimits:function(){this.getNextTheme()||this.overlay.find(".right").addClass("disabled"),this.getPreviousTheme()||this.overlay.find(".left").addClass("disabled")},loadThemePreview:function(a){var d,e,g,c=b.Deferred();return g=document.createElement("a"),g.href=location.href,g.search=b.param(_.extend(f.utils.parseQueryString(g.search.substr(1)),{theme:a,changeset_uuid:f.settings.changeset.uuid})),e=b(".wp-full-overlay"),e.addClass("customize-loading"),d=function(){var a;f.state("processing").get()>0||(f.state("processing").unbind(d),a=f.requestChangesetUpdate(),a.done(function(){b(window).off("beforeunload.customize-confirm"),top.location.href=g.href,c.resolve()}),a.fail(function(){e.removeClass("customize-loading"),c.reject()}))},0===f.state("processing").get()?d():f.state("processing").bind(d),c.promise()},showDetails:function(a,c){var e,d=this;c=c||function(){},d.currentTheme=a.id,d.overlay.html(d.template(a)).fadeIn("fast").focus(),b("body").addClass("modal-open"),d.containFocus(d.overlay),d.updateLimits(),e=d.overlay.find(".inactive-theme > a"),e.on("click",function(b){b.preventDefault(),e.hasClass("disabled")||(e.addClass("disabled"),d.loadThemePreview(a.id).fail(function(){e.removeClass("disabled")}))}),c()},closeDetails:function(){b("body").removeClass("modal-open"),this.overlay.fadeOut("fast"),f.control("theme_"+this.currentTheme).focus()},containFocus:function(a){var c;a.on("keydown",function(d){if(9===d.keyCode)return c=b(":tabbable",a),c.last()[0]!==d.target||d.shiftKey?c.first()[0]===d.target&&d.shiftKey?(c.last().focus(),!1):void 0:(c.first().focus(),!1)})}}),f.Panel=c.extend({containerType:"panel",initialize:function(a,b){var d=this;c.prototype.initialize.call(d,a,b),d.embed(),d.deferred.embedded.done(function(){d.ready()})},embed:function(){var a=this,c=b("#customize-theme-controls"),d=b(".customize-pane-parent");a.headContainer.parent().is(d)||d.append(a.headContainer),a.contentContainer.parent().is(a.headContainer)||(c.append(a.contentContainer),a.renderContent()),a.deferred.embedded.resolve()},attachEvents:function(){var a,c=this;c.headContainer.find(".accordion-section-title").on("click keydown",function(a){f.utils.isKeydownButNotEnterEvent(a)||(a.preventDefault(),c.expanded()||c.expand())}),c.container.find(".customize-panel-back").on("click keydown",function(a){f.utils.isKeydownButNotEnterEvent(a)||(a.preventDefault(),c.expanded()&&c.collapse())}),a=c.container.find(".panel-meta:first"),a.find("> .accordion-section-title .customize-help-toggle").on("click keydown",function(d){if(!f.utils.isKeydownButNotEnterEvent(d)&&(d.preventDefault(),!a.hasClass("cannot-expand"))){var e=a.find(".customize-panel-description:first");a.hasClass("open")?(a.toggleClass("open"),e.slideUp(c.defaultExpandedArguments.duration),b(this).attr("aria-expanded",!1)):(e.slideDown(c.defaultExpandedArguments.duration),a.toggleClass("open"),b(this).attr("aria-expanded",!0))}})},sections:function(){return this._children("panel","section")},isContextuallyActive:function(){var a=this,b=a.sections(),c=0;return _(b).each(function(a){a.active()&&a.isContextuallyActive()&&(c+=1)}),0!==c},onChangeExpanded:function(a,b){if(b.unchanged)return void(b.completeCallback&&b.completeCallback());var c=this,d=c.contentContainer,e=d.closest(".wp-full-overlay"),g=d.closest(".wp-full-overlay-sidebar-content"),h=c.headContainer.find(".accordion-section-title"),i=d.find(".customize-panel-back");a&&!d.hasClass("current-panel")?(f.section.each(function(a){c.id!==a.panel()&&a.collapse({duration:0})}),f.panel.each(function(a){c!==a&&a.collapse({duration:0})}),c._animateChangeExpanded(function(){h.attr("tabindex","-1"),i.attr("tabindex","0"),i.focus(),d.css("top",""),g.scrollTop(0),b.completeCallback&&b.completeCallback()}),e.addClass("in-sub-panel"),d.addClass("current-panel"),f.state("expandedPanel").set(c)):!a&&d.hasClass("current-panel")&&(c._animateChangeExpanded(function(){h.attr("tabindex","0"),i.attr("tabindex","-1"),h.focus(),d.css("top",""),b.completeCallback&&b.completeCallback()}),e.removeClass("in-sub-panel"),d.removeClass("current-panel"),c===f.state("expandedPanel").get()&&f.state("expandedPanel").set(!1))},renderContent:function(){var a,c=this;(a=0!==b("#tmpl-"+c.templateSelector+"-content").length?wp.template(c.templateSelector+"-content"):wp.template("customize-panel-default-content"))&&c.headContainer&&c.contentContainer.html(a(c.params))}}),f.Control=f.Class.extend({defaultActiveArguments:{duration:"fast",completeCallback:b.noop},initialize:function(a,c){var e,g,h,d=this;d.params={},b.extend(d,c||{}),d.id=a,d.selector="#customize-control-"+a.replace(/\]/g,"").replace(/\[/g,"-"),d.templateSelector="customize-control-"+d.params.type+"-content",d.container=b(d.params.content?d.params.content:d.selector),d.deferred={embedded:new b.Deferred},d.section=new f.Value,d.priority=new f.Value,d.active=new f.Value,d.activeArgumentsQueue=[],d.notifications=new f.Values({defaultConstructor:f.Notification}),d.elements=[],e=d.container.find("[data-customize-setting-link]"),g={},e.each(function(){var c,a=b(this);if(a.is(":radio")){if(c=a.prop("name"),g[c])return;g[c]=!0,a=e.filter('[name="'+c+'"]')}f(a.data("customizeSettingLink"),function(b){var c=new f.Element(a);d.elements.push(c),c.sync(b),c.set(b())})}),d.active.bind(function(a){var c=d.activeArgumentsQueue.shift();c=b.extend({},d.defaultActiveArguments,c),d.onChangeActive(a,c)}),d.section.set(d.params.section),d.priority.set(isNaN(d.params.priority)?10:d.params.priority),d.active.set(d.params.active),f.utils.bubbleChildValueChanges(d,["section","priority","active"]),h=b.map(d.params.settings,function(a){return a}),0===h.length?(d.setting=null,d.settings={},d.embed()):f.apply(f,h.concat(function(){var a;d.settings={};for(a in d.params.settings)d.settings[a]=f(d.params.settings[a]);d.setting=d.settings.default||null,_.each(d.settings,function(a){a.notifications.bind("add",function(b){var c,e,g;e=a.id+":"+b.code,g=_.extend({},b,{setting:a.id}),c=new f.Notification(e,g),d.notifications.add(c.code,c)}),a.notifications.bind("remove",function(b){d.notifications.remove(a.id+":"+b.code)})}),d.embed()})),d.deferred.embedded.done(function(){var a=_.debounce(function(){d.renderNotifications()});d.notifications.bind("add",function(b){wp.a11y.speak(b.message,"assertive"),a()}),d.notifications.bind("remove",a),d.renderNotifications(),d.ready()})},embed:function(){var b,a=this;b=function(b){var c;b&&f.section(b,function(b){b.deferred.embedded.done(function(){c=b.contentContainer.is("ul")?b.contentContainer:b.contentContainer.find("ul:first"),a.container.parent().is(c)||(c.append(a.container),a.renderContent()),a.deferred.embedded.resolve()})})},a.section.bind(b),b(a.section.get())},ready:function(){var c,a=this;"dropdown-pages"===a.params.type&&a.params.allow_addition&&(c=a.container.find(".new-content-item"),c.hide(),a.container.on("click",".add-new-toggle",function(a){b(a.currentTarget).slideUp(180),c.slideDown(180),c.find(".create-item-input").focus()}),a.container.on("click",".add-content",function(){a.addNewPage()}),a.container.on("keyup",".create-item-input",function(b){13===b.which&&a.addNewPage()}))},getNotificationsContainerElement:function(){var c,d,a=this;return d=a.container.find(".customize-control-notifications-container:first"),d.length?d:(d=b('<div class="customize-control-notifications-container"></div>'),a.container.hasClass("customize-control-nav_menu_item")?a.container.find(".menu-item-settings:first").prepend(d):a.container.hasClass("customize-control-widget_form")?a.container.find(".widget-inside:first").prepend(d):(c=a.container.find(".customize-control-title"),c.length?c.after(d):a.container.prepend(d)),d)},renderNotifications:function(){var c,d,a=this,e=!1;(c=a.getNotificationsContainerElement())&&c.length&&(d=[],a.notifications.each(function(a){d.push(a),"error"===a.type&&(e=!0)}),0===d.length?c.stop().slideUp("fast"):c.stop().slideDown("fast",null,function(){b(this).css("height","auto")}),a.notificationsTemplate||(a.notificationsTemplate=wp.template("customize-control-notifications")),a.container.toggleClass("has-notifications",0!==d.length),a.container.toggleClass("has-error",e),c.empty().append(b.trim(a.notificationsTemplate({notifications:d,altNotice:Boolean(a.altNotice)}))))},expand:function(a){f.section(this.section()).expand(a)},focus:d,onChangeActive:function(a,c){if(c.unchanged)return void(c.completeCallback&&c.completeCallback());b.contains(document,this.container[0])?a?this.container.slideDown(c.duration,c.completeCallback):this.container.slideUp(c.duration,c.completeCallback):(this.container.toggle(a),c.completeCallback&&c.completeCallback())},toggle:function(a){return this.onChangeActive(a,this.defaultActiveArguments)},activate:c.prototype.activate,deactivate:c.prototype.deactivate,_toggleActive:c.prototype._toggleActive,dropdownInit:function(){var a=this,b=this.container.find(".dropdown-status"),c=this.params,d=!1,e=function(a){"string"==typeof a&&c.statuses&&c.statuses[a]?b.html(c.statuses[a]).show():b.hide()};this.container.on("click keydown",".dropdown",function(b){f.utils.isKeydownButNotEnterEvent(b)||(b.preventDefault(),d||a.container.toggleClass("open"),a.container.hasClass("open")&&a.container.parent().parent().find("li.library-selected").focus(),d=!0,setTimeout(function(){d=!1},400))}),this.setting.bind(e),e(this.setting())},renderContent:function(){var a,c=this;0!==b("#tmpl-"+c.templateSelector).length&&(a=wp.template(c.templateSelector))&&c.container&&c.container.html(a(c.params))},addNewPage:function(){var c,d,e,g,h,i,a=this;if("dropdown-pages"===a.params.type&&a.params.allow_addition&&f.Menus){if(d=a.container.find(".add-new-toggle"),e=a.container.find(".new-content-item"),g=a.container.find(".create-item-input"),h=g.val(),i=a.container.find("select"),!h)return void g.addClass("invalid");g.removeClass("invalid"),g.attr("disabled","disabled"),c=f.Menus.insertAutoDraftPost({post_title:h,post_type:"page"}),c.done(function(c){var g,j,k;g=new f.Menus.AvailableItemModel({id:"post-"+c.post_id,title:h,type:"page",type_label:f.Menus.data.l10n.page_label,object:"post_type",object_id:c.post_id,url:c.url}),f.Menus.availableMenuItemsPanel.collection.add(g),j=b("#available-menu-items-post_type-page").find(".available-menu-items-list"),k=wp.template("available-menu-item"),j.prepend(k(g.attributes)),i.focus(),a.setting.set(String(c.post_id)),e.slideUp(180),d.slideDown(180)}),c.always(function(){g.val("").removeAttr("disabled")})}}}),f.ColorControl=f.Control.extend({ready:function(){var d,a=this,b="hue"===this.params.mode,c=!1;b?(d=this.container.find(".color-picker-hue"),d.val(a.setting()).wpColorPicker({change:function(b,d){c=!0,a.setting(d.color.h()),c=!1}})):(d=this.container.find(".color-picker-hex"),d.val(a.setting()).wpColorPicker({change:function(){c=!0,a.setting.set(d.wpColorPicker("color")),c=!1},clear:function(){c=!0,a.setting.set(""),c=!1}})),a.setting.bind(function(a){c||(d.val(a),d.wpColorPicker("color",a))}),a.container.on("keydown",function(b){var c;27===b.which&&(c=a.container.find(".wp-picker-container"),c.hasClass("wp-picker-active")&&(d.wpColorPicker("close"),a.container.find(".wp-color-result").focus(),b.stopPropagation()))})}}),f.MediaControl=f.Control.extend({ready:function(){function c(c){var d=b.Deferred();a.extended(f.UploadControl)?d.resolve():(c=parseInt(c,10),_.isNaN(c)||c<=0?(delete a.params.attachment,d.resolve()):a.params.attachment&&a.params.attachment.id===c&&d.resolve()),"pending"===d.state()&&wp.media.attachment(c).fetch().done(function(){a.params.attachment=this.attributes,d.resolve(),wp.customize.previewer.send(a.setting.id+"-attachment-data",this.attributes)}),d.done(function(){a.renderContent()})}var a=this;_.bindAll(a,"restoreDefault","removeFile","openFrame","select","pausePlayer"),a.container.on("click keydown",".upload-button",a.openFrame),a.container.on("click keydown",".upload-button",a.pausePlayer),a.container.on("click keydown",".thumbnail-image img",a.openFrame),a.container.on("click keydown",".default-button",a.restoreDefault),a.container.on("click keydown",".remove-button",a.pausePlayer),a.container.on("click keydown",".remove-button",a.removeFile),a.container.on("click keydown",".remove-button",a.cleanupPlayer),f.section(a.section()).container.on("expanded",function(){a.player&&a.player.setControlsSize()}).on("collapsed",function(){a.pausePlayer()}),c(a.setting()),a.setting.bind(c)},pausePlayer:function(){this.player&&this.player.pause()},cleanupPlayer:function(){this.player&&wp.media.mixin.removePlayer(this.player)},openFrame:function(a){f.utils.isKeydownButNotEnterEvent(a)||(a.preventDefault(),this.frame||this.initFrame(),this.frame.open())},initFrame:function(){this.frame=wp.media({button:{text:this.params.button_labels.frame_button},states:[new wp.media.controller.Library({title:this.params.button_labels.frame_title,library:wp.media.query({type:this.params.mime_type}),multiple:!1,date:!1})]}),this.frame.on("select",this.select)},select:function(){var a,b=this.frame.state().get("selection").first().toJSON(),c=window._wpmejsSettings||{};this.params.attachment=b,this.setting(b.id),a=this.container.find("audio, video").get(0),a?this.player=new MediaElementPlayer(a,c):this.cleanupPlayer()},restoreDefault:function(a){f.utils.isKeydownButNotEnterEvent(a)||(a.preventDefault(),this.params.attachment=this.params.defaultAttachment,this.setting(this.params.defaultAttachment.url))},removeFile:function(a){f.utils.isKeydownButNotEnterEvent(a)||(a.preventDefault(),this.params.attachment={},this.setting(""),this.renderContent())}}),f.UploadControl=f.MediaControl.extend({select:function(){var a,b=this.frame.state().get("selection").first().toJSON(),c=window._wpmejsSettings||{};this.params.attachment=b,this.setting(b.url),a=this.container.find("audio, video").get(0),a?this.player=new MediaElementPlayer(a,c):this.cleanupPlayer()},success:function(){},removerVisibility:function(){}}),f.ImageControl=f.UploadControl.extend({thumbnailSrc:function(){}}),f.BackgroundControl=f.UploadControl.extend({ready:function(){f.UploadControl.prototype.ready.apply(this,arguments)},select:function(){f.UploadControl.prototype.select.apply(this,arguments),wp.ajax.post("custom-background-add",{nonce:_wpCustomizeBackground.nonces.add,wp_customize:"on",customize_theme:f.settings.theme.stylesheet,attachment_id:this.params.attachment.id})}}),f.BackgroundPositionControl=f.Control.extend({ready:function(){var c,a=this;a.container.on("change",'input[name="background-position"]',function(){var c=b(this).val().split(" ");a.settings.x(c[0]),a.settings.y(c[1])}),c=_.debounce(function(){var b,c,d,e;b=a.settings.x.get(),c=a.settings.y.get(),e=String(b)+" "+String(c),d=a.container.find('input[name="background-position"][value="'+e+'"]'),d.click()}),a.settings.x.bind(c),a.settings.y.bind(c),c()}}),f.CroppedImageControl=f.MediaControl.extend({openFrame:function(a){f.utils.isKeydownButNotEnterEvent(a)||(this.initFrame(),this.frame.setState("library").open())},initFrame:function(){var a=_wpMediaViewsL10n;this.frame=wp.media({button:{text:a.select,close:!1},states:[new wp.media.controller.Library({title:this.params.button_labels.frame_title,library:wp.media.query({type:"image"}),multiple:!1,date:!1,priority:20,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.CustomizeImageCropper({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}),this.frame.on("select",this.onSelect,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect:function(){var a=this.frame.state().get("selection").first().toJSON();this.params.width!==a.width||this.params.height!==a.height||this.params.flex_width||this.params.flex_height?this.frame.setState("cropper"):(this.setImageFromAttachment(a),this.frame.close())},onCropped:function(a){this.setImageFromAttachment(a)},calculateImageSelectOptions:function(a,b){var m,n,o,c=b.get("control"),d=!!parseInt(c.params.flex_width,10),e=!!parseInt(c.params.flex_height,10),f=a.get("width"),g=a.get("height"),h=parseInt(c.params.width,10),i=parseInt(c.params.height,10),j=h/i,k=h,l=i;return b.set("canSkipCrop",!c.mustBeCropped(d,e,h,i,f,g)),f/g>j?(i=g,h=i*j):(h=f,i=h/j),m=(f-h)/2,n=(g-i)/2,o={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:f,imageHeight:g,minWidth:k>h?h:k,minHeight:l>i?i:l,x1:m,y1:n,x2:h+m,y2:i+n},!1===e&&!1===d&&(o.aspectRatio=h+":"+i),!0===e&&(delete o.minHeight,o.maxWidth=f),!0===d&&(delete o.minWidth,o.maxHeight=g),o},mustBeCropped:function(a,b,c,d,e,f){return(!0!==a||!0!==b)&&((!0!==a||d!==f)&&((!0!==b||c!==e)&&((c!==e||d!==f)&&!(e<=c))))},onSkippedCrop:function(){var a=this.frame.state().get("selection").first().toJSON();this.setImageFromAttachment(a)},setImageFromAttachment:function(a){this.params.attachment=a,this.setting(a.id)}}),f.SiteIconControl=f.CroppedImageControl.extend({initFrame:function(){var a=_wpMediaViewsL10n;this.frame=wp.media({button:{text:a.select,close:!1},states:[new wp.media.controller.Library({title:this.params.button_labels.frame_title,library:wp.media.query({type:"image"}),multiple:!1,date:!1,priority:20,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.SiteIconCropper({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}),this.frame.on("select",this.onSelect,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect:function(){var a=this.frame.state().get("selection").first().toJSON(),b=this;this.params.width!==a.width||this.params.height!==a.height||this.params.flex_width||this.params.flex_height?this.frame.setState("cropper"):wp.ajax.post("crop-image",{nonce:a.nonces.edit,id:a.id,context:"site-icon",cropDetails:{x1:0,y1:0,width:this.params.width,height:this.params.height,dst_width:this.params.width,dst_height:this.params.height}}).done(function(a){b.setImageFromAttachment(a),b.frame.close()}).fail(function(){b.frame.trigger("content:error:crop")})},setImageFromAttachment:function(a){var d,e,c=["site_icon-32","thumbnail","full"];_.each(c,function(b){e||_.isUndefined(a.sizes[b])||(e=a.sizes[b])}),this.params.attachment=a,this.setting(a.id),e&&(d=b('link[rel="icon"][sizes="32x32"]'),d.attr("href",e.url))},removeFile:function(a){f.utils.isKeydownButNotEnterEvent(a)||(a.preventDefault(),this.params.attachment={},this.setting(""),this.renderContent(),b('link[rel="icon"][sizes="32x32"]').attr("href","/favicon.ico"))}}),f.HeaderControl=f.Control.extend({ready:function(){this.btnRemove=b("#customize-control-header_image .actions .remove"),this.btnNew=b("#customize-control-header_image .actions .new"),_.bindAll(this,"openMedia","removeImage"),this.btnNew.on("click",this.openMedia),this.btnRemove.on("click",this.removeImage),f.HeaderTool.currentHeader=this.getInitialHeaderImage(),new f.HeaderTool.CurrentView({model:f.HeaderTool.currentHeader,el:"#customize-control-header_image .current .container"}),new f.HeaderTool.ChoiceListView({collection:f.HeaderTool.UploadsList=new f.HeaderTool.ChoiceList,el:"#customize-control-header_image .choices .uploaded .list"}),new f.HeaderTool.ChoiceListView({collection:f.HeaderTool.DefaultsList=new f.HeaderTool.DefaultsList,el:"#customize-control-header_image .choices .default .list"}),f.HeaderTool.combinedList=f.HeaderTool.CombinedList=new f.HeaderTool.CombinedList([f.HeaderTool.UploadsList,f.HeaderTool.DefaultsList]),wp.media.controller.Cropper.prototype.defaults.doCropArgs.wp_customize="on",wp.media.controller.Cropper.prototype.defaults.doCropArgs.customize_theme=f.settings.theme.stylesheet},getInitialHeaderImage:function(){if(!f.get().header_image||!f.get().header_image_data||_.contains(["remove-header","random-default-image","random-uploaded-image"],f.get().header_image))return new f.HeaderTool.ImageModel;var a=_.find(_wpCustomizeHeader.uploads,function(a){return a.attachment_id===f.get().header_image_data.attachment_id});return a||(a={url:f.get().header_image,thumbnail_url:f.get().header_image,attachment_id:f.get().header_image_data.attachment_id}),new f.HeaderTool.ImageModel({header:a,choice:a.url.split("/").pop()})},calculateImageSelectOptions:function(a,b){var h,i,j,k,l,m,c=parseInt(_wpCustomizeHeader.data.width,10),d=parseInt(_wpCustomizeHeader.data.height,10),e=!!parseInt(_wpCustomizeHeader.data["flex-width"],10),g=!!parseInt(_wpCustomizeHeader.data["flex-height"],10);return l=a.get("width"),k=a.get("height"),this.headerImage=new f.HeaderTool.ImageModel,this.headerImage.set({themeWidth:c,themeHeight:d,themeFlexWidth:e,themeFlexHeight:g,imageWidth:l,imageHeight:k}),b.set("canSkipCrop",!this.headerImage.shouldBeCropped()),h=c/d,i=l,j=k,i/j>h?(d=j,c=d*h):(c=i,d=c/h),m={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:l,imageHeight:k,x1:0,y1:0,x2:c,y2:d},!1===g&&!1===e&&(m.aspectRatio=c+":"+d),!1===g&&(m.maxHeight=d),!1===e&&(m.maxWidth=c),m},openMedia:function(a){var b=_wpMediaViewsL10n;a.preventDefault(),this.frame=wp.media({button:{text:b.selectAndCrop,close:!1},states:[new wp.media.controller.Library({title:b.chooseImage,library:wp.media.query({type:"image"}),multiple:!1,date:!1,priority:20,suggestedWidth:_wpCustomizeHeader.data.width,suggestedHeight:_wpCustomizeHeader.data.height}),new wp.media.controller.Cropper({imgSelectOptions:this.calculateImageSelectOptions})]}),this.frame.on("select",this.onSelect,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this),this.frame.open()},onSelect:function(){this.frame.setState("cropper")},onCropped:function(a){var b=a.url,c=a.attachment_id,d=a.width,e=a.height;this.setImageFromURL(b,c,d,e)},onSkippedCrop:function(a){var b=a.get("url"),c=a.get("width"),d=a.get("height");this.setImageFromURL(b,a.id,c,d)},setImageFromURL:function(a,b,c,d){var e,g={};g.url=a,g.thumbnail_url=a,g.timestamp=_.now(),b&&(g.attachment_id=b),c&&(g.width=c),d&&(g.height=d),e=new f.HeaderTool.ImageModel({header:g,choice:a.split("/").pop()}),f.HeaderTool.UploadsList.add(e),f.HeaderTool.currentHeader.set(e.toJSON()),e.save(),e.importImage()},removeImage:function(){f.HeaderTool.currentHeader.trigger("hide"),f.HeaderTool.CombinedList.trigger("control:removeImage")}}),f.ThemeControl=f.Control.extend({touchDrag:!1,isRendered:!1,renderContent:function(){var a=this,b=arguments;f.section(a.section(),function(c){c.expanded()?(f.Control.prototype.renderContent.apply(a,b),a.isRendered=!0):c.expanded.bind(function(c){c&&!a.isRendered&&(f.Control.prototype.renderContent.apply(a,b),a.isRendered=!0)})})},ready:function(){var a=this;a.container.on("touchmove",".theme",function(){a.touchDrag=!0}),a.container.on("click keydown touchend",".theme",function(c){if(!f.utils.isKeydownButNotEnterEvent(c))return!0===a.touchDrag?a.touchDrag=!1:void(b(c.target).is(".theme-actions .button")||f.section(a.section()).loadThemePreview(a.params.theme.id))}),a.container.on("click keydown",".theme-actions .theme-details",function(b){f.utils.isKeydownButNotEnterEvent(b)||(b.preventDefault(),f.section(a.section()).showDetails(a.params.theme))}),a.container.on("render-screenshot",function(){var a=b(this).find("img"),c=a.data("src");c&&a.attr("src",c)})},filter:function(a){var b=this,c=b.params.theme.name+" "+b.params.theme.description+" "+b.params.theme.tags+" "+b.params.theme.author;c=c.toLowerCase().replace("-"," "),-1!==c.search(a)?b.activate():b.deactivate()}}),f.defaultConstructor=f.Setting,f.control=new f.Values({defaultConstructor:f.Control}),f.section=new f.Values({defaultConstructor:f.Section}),f.panel=new f.Values({defaultConstructor:f.Panel}),f.PreviewFrame=f.Messenger.extend({sensitivity:null,initialize:function(a,c){var d=b.Deferred();d.promise(this),this.container=a.container,b.extend(a,{channel:f.PreviewFrame.uuid()}),f.Messenger.prototype.initialize.call(this,a,c),this.add("previewUrl",a.previewUrl),this.query=b.extend(a.query||{},{customize_messenger_channel:this.channel()}),this.run(d)},run:function(a){var i,j,k,c=this,d=!1,e=!1,g=null,h="{}"!==c.query.customized;c._ready&&c.unbind("ready",c._ready),c._ready=function(b){e=!0,g=b,c.container.addClass("iframe-ready"),b&&d&&a.resolveWith(c,[b])},c.bind("ready",c._ready),i=document.createElement("a"),i.href=c.previewUrl(),j=_.extend(f.utils.parseQueryString(i.search.substr(1)),{customize_changeset_uuid:c.query.customize_changeset_uuid,customize_theme:c.query.customize_theme,customize_messenger_channel:c.query.customize_messenger_channel}),i.search=b.param(j),c.iframe=b("<iframe />",{title:f.l10n.previewIframeTitle,name:"customize-"+c.channel()}),c.iframe.attr("onmousewheel",""),h?c.iframe.attr("data-src",i.href):c.iframe.attr("src",i.href),c.iframe.appendTo(c.container),c.targetWindow(c.iframe[0].contentWindow),h&&(k=b("<form>",{action:i.href,target:c.iframe.attr("name"),method:"post",hidden:"hidden"}),k.append(b("<input>",{type:"hidden",name:"_method",value:"GET"})),_.each(c.query,function(a,c){k.append(b("<input>",{type:"hidden",name:c,value:a}))}),c.container.append(k),k.submit(),k.remove()),c.bind("iframe-loading-error",function(b){return c.iframe.remove(),0===b?void c.login(a):-1===b?void a.rejectWith(c,["cheatin"]):void a.rejectWith(c,["request failure"])}),c.iframe.one("load",function(){d=!0,e?a.resolveWith(c,[g]):setTimeout(function(){a.rejectWith(c,["ready timeout"])},c.sensitivity)})},login:function(a){var d,c=this;if(d=function(){a.rejectWith(c,["logged out"])},this.triedLogin)return d();b.get(f.settings.url.ajax,{action:"logged-in"}).fail(d).done(function(e){var g;"1"!==e&&d(),g=b("<iframe />",{src:c.previewUrl(),title:f.l10n.previewIframeTitle}).hide(),g.appendTo(c.container),g.on("load",function(){c.triedLogin=!0,g.remove(),c.run(a)})})},destroy:function(){f.Messenger.prototype.destroy.call(this),this.iframe&&this.iframe.remove(),delete this.iframe,delete this.targetWindow}}),function(){var a=0;f.PreviewFrame.uuid=function(){return"preview-"+String(a++)}}(),f.setDocumentTitle=function(a){var b,c;b=f.settings.documentTitleTmpl,c=b.replace("%s",a),document.title=c,f.trigger("title",c)},f.Previewer=f.Messenger.extend({refreshBuffer:null,initialize:function(a,c){var d=this,e=document.createElement("a");b.extend(d,c||{}),d.deferred={active:b.Deferred()},d.refresh=_.debounce(function(a){return function(){var b,c;b=function(){return 0===f.state("processing").get()},b()?a.call(d):(c=function(){b()&&(a.call(d),f.state("processing").unbind(c))},f.state("processing").bind(c))}}(d.refresh),d.refreshBuffer),d.container=f.ensure(a.container),d.allowedUrls=a.allowedUrls,a.url=window.location.href,f.Messenger.prototype.initialize.call(d,a),e.href=d.origin(),d.add("scheme",e.protocol.replace(/:$/,"")),d.add("previewUrl",a.previewUrl).setter(function(a){var e,g,h,c=null,i=[];return e=document.createElement("a"),e.href=a,/\/wp-(admin|includes|content)(\/|$)/.test(e.pathname)?null:(e.search.length>1&&(g=f.utils.parseQueryString(e.search.substr(1)),delete g.customize_changeset_uuid,delete g.customize_theme,delete g.customize_messenger_channel,_.isEmpty(g)?e.search="":e.search=b.param(g)),i.push(e),d.scheme.get()+":"!==e.protocol&&(e=document.createElement("a"),e.href=i[0].href,e.protocol=d.scheme.get()+":",i.unshift(e)),h=document.createElement("a"),_.find(i,function(a){return!_.isUndefined(_.find(d.allowedUrls,function(b){if(h.href=b,e.protocol===h.protocol&&e.host===h.host&&0===e.pathname.indexOf(h.pathname.replace(/\/$/,"")))return c=a.href,!0}))}),c)}),d.bind("ready",d.ready),d.deferred.active.done(_.bind(d.keepPreviewAlive,d)),d.bind("synced",function(){d.send("active")}),d.previewUrl.bind(d.refresh),d.scroll=0,d.bind("scroll",function(a){d.scroll=a}),d.bind("url",function(a){var b,c=!1;d.scroll=0,b=function(){c=!0},d.previewUrl.bind(b),d.previewUrl.set(a),d.previewUrl.unbind(b),c||d.refresh()}),d.bind("documentTitle",function(a){f.setDocumentTitle(a)})},ready:function(a){var d,b=this,c={};c.settings=f.get(),c["settings-modified-while-loading"]=b.settingsModifiedWhileLoading,("resolved"!==b.deferred.active.state()||b.loading)&&(c.scroll=b.scroll),c["edit-shortcut-visibility"]=f.state("editShortcutVisibility").get(),b.send("sync",c),a.currentUrl&&(b.previewUrl.unbind(b.refresh),b.previewUrl.set(a.currentUrl),b.previewUrl.bind(b.refresh)),d={panel:a.activePanels,section:a.activeSections,control:a.activeControls},_(d).each(function(a,b){f[b].each(function(c,d){_.isUndefined(f.settings[b+"s"][d])&&_.isUndefined(a[d])||(a[d]?c.activate():c.deactivate())})}),a.settingValidities&&f._handleSettingValidities({settingValidities:a.settingValidities,focusInvalidControl:!1})},keepPreviewAlive:function(){var c,d,e,g,b=this;g=function(){d=setTimeout(e,f.settings.timeouts.keepAliveCheck)},c=function(){f.state("previewerAlive").set(!0),clearTimeout(d),g()},e=function(){f.state("previewerAlive").set(!1)},g(),b.bind("ready",c),b.bind("keep-alive",c)},query:function(){},abort:function(){this.loading&&(this.loading.destroy(),delete this.loading)},refresh:function(){var b,a=this;a.send("loading-initiated"),a.abort(),a.loading=new f.PreviewFrame({url:a.url(),previewUrl:a.previewUrl(),query:a.query({excludeCustomizedSaved:!0})||{},container:a.container}),a.settingsModifiedWhileLoading={},b=function(b){a.settingsModifiedWhileLoading[b.id]=!0},f.bind("change",b),a.loading.always(function(){f.unbind("change",b)}),a.loading.done(function(b){var d,c=this;a.preview=c,a.targetWindow(c.targetWindow()),a.channel(c.channel()),d=function(){c.unbind("synced",d),a._previousPreview&&a._previousPreview.destroy(),a._previousPreview=a.preview,a.deferred.active.resolve(),delete a.loading},c.bind("synced",d),a.trigger("ready",b)}),a.loading.fail(function(b){a.send("loading-failed"),"logged out"===b&&(a.preview&&(a.preview.destroy(),delete a.preview),a.login().done(a.refresh)),"cheatin"===b&&a.cheatin()})},login:function(){var c,d,e,a=this;return this._login?this._login:(c=b.Deferred(),this._login=c.promise(),d=new f.Messenger({channel:"login",url:f.settings.url.login}),e=b("<iframe />",{src:f.settings.url.login,title:f.l10n.loginIframeTitle}).appendTo(this.container),d.targetWindow(e[0].contentWindow),d.bind("login",function(){var b=a.refreshNonces();b.always(function(){e.remove(),d.destroy(),delete a._login}),b.done(function(){c.resolve()}),b.fail(function(){a.cheatin(),c.reject()})}),this._login)},cheatin:function(){b(document.body).empty().addClass("cheatin").append("<h1>"+f.l10n.cheatin+"</h1><p>"+f.l10n.notAllowed+"</p>")},refreshNonces:function(){var a,c=b.Deferred();return c.promise(),a=wp.ajax.post("customize_refresh_nonces",{wp_customize:"on",customize_theme:f.settings.theme.stylesheet}),a.done(function(a){f.trigger("nonce-refresh",a),c.resolve()}),a.fail(function(){c.reject()}),c}}),f.settingConstructor={},f.controlConstructor={color:f.ColorControl,media:f.MediaControl,upload:f.UploadControl,image:f.ImageControl,cropped_image:f.CroppedImageControl,site_icon:f.SiteIconControl,header:f.HeaderControl,background:f.BackgroundControl,background_position:f.BackgroundPositionControl,theme:f.ThemeControl},f.panelConstructor={},f.sectionConstructor={themes:f.ThemesSection},f._handleSettingValidities=function(b){var c,d=[],e=!1;_.each(b.settingValidities,function(a,b){var c=f(b);c&&(_.isObject(a)&&_.each(a,function(a,b){var e,g,h=!1;e=new f.Notification(b,_.extend({fromServer:!0},a)),g=c.notifications(e.code),g&&(h=e.type!==g.type||e.message!==g.message||!_.isEqual(e.data,g.data)),h&&c.notifications.remove(b),c.notifications.has(e.code)||c.notifications.add(b,e),d.push(c.id)}),c.notifications.each(function(b){"error"!==b.type||!0!==a&&a[b.code]||c.notifications.remove(b.code)}))}),b.focusInvalidControl&&(c=f.findControlsForSettings(d),_(_.values(c)).find(function(a){return _(a).find(function(a){var b=a.section()&&f.section.has(a.section())&&f.section(a.section()).expanded();return b&&a.expanded&&(b=a.expanded()),b&&(a.focus(),e=!0),e})}),e||_.isEmpty(c)||_.values(c)[0][0].focus())},f.findControlsForSettings=function(b){var d,c={};return _.each(_.unique(b),function(a){var b=f(a);b&&(d=b.findControls())&&d.length>0&&(c[a]=d)}),c},f.reflowPaneContents=_.bind(function(){var a,c,d,e=[],g=!1;document.activeElement&&(c=b(document.activeElement)),f.panel.each(function(b){var c=b.sections(),d=_.pluck(c,"headContainer");e.push(b),a=b.contentContainer.is("ul")?b.contentContainer:b.contentContainer.find("ul:first"),f.utils.areElementListsEqual(d,a.children("[id]"))||(_(c).each(function(b){a.append(b.headContainer)}),g=!0)}),f.section.each(function(b){var c=b.controls(),d=_.pluck(c,"container");b.panel()||e.push(b),a=b.contentContainer.is("ul")?b.contentContainer:b.contentContainer.find("ul:first"),f.utils.areElementListsEqual(d,a.children("[id]"))||(_(c).each(function(b){a.append(b.container)}),g=!0)}),e.sort(f.utils.prioritySort),d=_.pluck(e,"headContainer"),a=b("#customize-theme-controls .customize-pane-parent"),f.utils.areElementListsEqual(d,a.children())||(_(e).each(function(b){a.append(b.headContainer)}),g=!0),f.panel.each(function(a){var b=a.active();a.active.callbacks.fireWith(a.active,[b,b])}),f.section.each(function(a){var b=a.active();a.active.callbacks.fireWith(a.active,[b,b])}),g&&c&&c.focus(),f.trigger("pane-contents-reflowed")},f),b(function(){if(f.settings=window._wpCustomizeSettings,f.l10n=window._wpCustomizeControlsL10n,f.settings&&b.support.postMessage&&(b.support.cors||!f.settings.isCrossDomain)){null===f.PreviewFrame.prototype.sensitivity&&(f.PreviewFrame.prototype.sensitivity=f.settings.timeouts.previewFrameSensitivity),null===f.Previewer.prototype.refreshBuffer&&(f.Previewer.prototype.refreshBuffer=f.settings.timeouts.windowRefresh);var a,c=b(document.body),d=c.children(".wp-full-overlay"),e=b("#customize-info .panel-title.site-title"),g=b(".customize-controls-close"),h=b("#save"),i=b("#customize-footer-actions");b("#customize-controls").on("keydown",function(a){var c=13===a.which,d=b(a.target);c&&(d.is("input:not([type=button])")||d.is("select"))&&a.preventDefault()}),b(".customize-info").find("> .accordion-section-title .customize-help-toggle").on("click",function(){var a=b(this).closest(".accordion-section"),c=a.find(".customize-panel-description:first");a.hasClass("cannot-expand")||(a.hasClass("open")?(a.toggleClass("open"),c.slideUp(f.Panel.prototype.defaultExpandedArguments.duration),b(this).attr("aria-expanded",!1)):(c.slideDown(f.Panel.prototype.defaultExpandedArguments.duration),a.toggleClass("open"),b(this).attr("aria-expanded",!0)))}),f.previewer=new f.Previewer({container:"#customize-preview",form:"#customize-controls",previewUrl:f.settings.url.preview,allowedUrls:f.settings.url.allowed},{nonce:f.settings.nonce,query:function(a){var b={wp_customize:"on",customize_theme:f.settings.theme.stylesheet,nonce:this.nonce.preview,customize_changeset_uuid:f.settings.changeset.uuid};return b.customized=JSON.stringify(f.dirtyValues({unsaved:a&&a.excludeCustomizedSaved})),b},save:function(c){function o(a){l[a.id]=!0}var j,k,n,d=this,e=b.Deferred(),g="publish",i=f.state("processing"),l={},m=[];return c&&c.status&&(g=c.status),f.state("saving").get()&&(e.reject("already_saving"),e.promise()),f.state("saving").set(!0),f.bind("change",o),k=function(){var i,j,k={},p=f._latestRevision;if(f.each(function(a){a.notifications.each(function(b){"error"!==b.type||b.fromServer||(m.push(a.id),k[a.id]||(k[a.id]={}),k[a.id][b.code]=b)})}),n=f.findControlsForSettings(m),!_.isEmpty(n))return _.values(n)[0][0].focus(),f.unbind("change",o),e.rejectWith(d,[{setting_invalidities:k}]),f.state("saving").set(!1),e.promise();j=b.extend(d.query({excludeCustomizedSaved:!1}),{nonce:d.nonce.save,customize_changeset_status:g}),c&&c.date&&(j.customize_changeset_date=c.date),c&&c.title&&(j.customize_changeset_title=c.title),i=wp.ajax.post("customize_save",j),h.prop("disabled",!0),f.trigger("save",i),i.always(function(){f.state("saving").set(!1),h.prop("disabled",!1),f.unbind("change",o)}),i.fail(function(a){"0"===a?a="not_logged_in":"-1"===a&&(a="invalid_nonce"),"invalid_nonce"===a?d.cheatin():"not_logged_in"===a&&(d.preview.iframe.hide(),d.login().done(function(){d.save(),d.preview.iframe.show()})),a.setting_validities&&f._handleSettingValidities({settingValidities:a.setting_validities,focusInvalidControl:!0}),e.rejectWith(d,[a]),f.trigger("error",a)}),i.done(function(b){d.send("saved",b),f.state("changesetStatus").set(b.changeset_status),"publish"===b.changeset_status&&(f.each(function(a){a._dirty&&(_.isUndefined(f._latestSettingRevisions[a.id])||f._latestSettingRevisions[a.id]<=p)&&(a._dirty=!1)}),f.state("changesetStatus").set(""),f.settings.changeset.uuid=b.next_changeset_uuid,a.send("changeset-uuid",f.settings.changeset.uuid)),b.setting_validities&&f._handleSettingValidities({settingValidities:b.setting_validities,focusInvalidControl:!0}),e.resolveWith(d,[b]),f.trigger("saved",b),_.isEmpty(l)||f.state("saved").set(!1)})},0===i()?k():(j=function(){0===i()&&(f.state.unbind("change",j),k())},f.state.bind("change",j)),e.promise()}}),b.ajaxPrefilter(function(c){/wp_customize=on/.test(c.data)&&(c.data+="&"+b.param({customize_preview_nonce:f.settings.nonce.preview}))}),f.previewer.bind("nonce",function(a){b.extend(this.nonce,a)}),f.bind("nonce-refresh",function(a){b.extend(f.settings.nonce,a),b.extend(f.previewer.nonce,a),f.previewer.send("nonce-refresh",a)}),b.each(f.settings.settings,function(a,b){var d,c=f.settingConstructor[b.type]||f.Setting;d=new c(a,b.value,{transport:b.transport,previewer:f.previewer,dirty:!!b.dirty}),f.add(a,d)}),b.each(f.settings.panels,function(a,b){var d,c=f.panelConstructor[b.type]||f.Panel;d=new c(a,{params:b}),f.panel.add(a,d)}),b.each(f.settings.sections,function(a,b){var d,c=f.sectionConstructor[b.type]||f.Section;d=new c(a,{params:b}),f.section.add(a,d)}),b.each(f.settings.controls,function(a,b){var d,c=f.controlConstructor[b.type]||f.Control;d=new c(a,{params:b,previewer:f.previewer}),f.control.add(a,d)}),_.each(["panel","section","control"],function(a){var b=f.settings.autofocus[a];b&&f[a](b,function(a){a.deferred.embedded.done(function(){f.previewer.deferred.active.done(function(){a.focus()})})})}),f.bind("ready",f.reflowPaneContents),b([f.panel,f.section,f.control]).each(function(a,b){var c=_.debounce(f.reflowPaneContents,f.settings.timeouts.reflowPaneContents);b.bind("add",c),b.bind("change",c),b.bind("remove",c)}),function(){var q,a=new f.Values,d=a.create("saved"),e=a.create("saving"),i=a.create("activated"),j=a.create("processing"),k=a.create("paneVisible"),l=a.create("expandedPanel"),m=a.create("expandedSection"),n=a.create("changesetStatus"),o=a.create("previewerAlive"),p=a.create("editShortcutVisibility");a.bind("change",function(){var a;i()?""===n.get()&&d()?(h.val(f.l10n.saved),g.find(".screen-reader-text").text(f.l10n.close)):(h.val(f.l10n.save),g.find(".screen-reader-text").text(f.l10n.cancel)):(h.val(f.l10n.activate),g.find(".screen-reader-text").text(f.l10n.cancel)),a=!e()&&(!i()||!d()||""!==n()&&"publish"!==n()),h.prop("disabled",!a)}),n(f.settings.changeset.status),d(!0),""===n()&&f.each(function(a){a._dirty&&d(!1)}),e(!1),i(f.settings.theme.active),j(0),k(!0),l(!1),m(!1),o(!0),p("visible"),f.bind("change",function(){a("saved").set(!1)}),e.bind(function(a){c.toggleClass("saving",a)}),f.bind("saved",function(b){a("saved").set(!0),"publish"===b.changeset_status&&a("activated").set(!0)}),i.bind(function(a){a&&f.trigger("activated")}),q=function(a){var c,d;if(c=document.createElement("a"),c.href=location.href,d=f.utils.parseQueryString(c.search.substr(1)),a){if(d.changeset_uuid===f.settings.changeset.uuid)return;d.changeset_uuid=f.settings.changeset.uuid}else{if(!d.changeset_uuid)return;delete d.changeset_uuid}c.search=b.param(d),history.replaceState({},document.title,c.href)},history.replaceState&&n.bind(function(a){q(""!==a&&"publish"!==a)}),f.state=a}(),f.previewer.previewUrl()?f.previewer.refresh():f.previewer.previewUrl(f.settings.url.home),h.click(function(a){f.previewer.save(),a.preventDefault()}).keydown(function(a){9!==a.which&&(13===a.which&&f.previewer.save(),a.preventDefault())}),g.keydown(function(a){9!==a.which&&(13===a.which&&this.click(),a.preventDefault())}),b(".collapse-sidebar").on("click",function(){f.state("paneVisible").set(!f.state("paneVisible").get())}),f.state("paneVisible").bind(function(a){d.toggleClass("preview-only",!a),d.toggleClass("expanded",a),d.toggleClass("collapsed",!a),a?b(".collapse-sidebar").attr({"aria-expanded":"true","aria-label":f.l10n.collapseSidebar}):b(".collapse-sidebar").attr({"aria-expanded":"false","aria-label":f.l10n.expandSidebar})}),b("body").on("keydown",function(a){var c,d=[],e=[],g=[];27===a.which&&(b(a.target).is("body")||b.contains(b("#customize-controls")[0],a.target))&&(f.control.each(function(a){a.expanded&&a.expanded()&&_.isFunction(a.collapse)&&d.push(a)}),f.section.each(function(a){a.expanded()&&e.push(a)}),f.panel.each(function(a){a.expanded()&&g.push(a)}),d.length>0&&0===e.length&&(d.length=0),(c=d[0]||e[0]||g[0])&&(c.collapse(),a.preventDefault()))}),b(".customize-controls-preview-toggle").on("click",function(){f.state("paneVisible").set(!f.state("paneVisible").get())}),function(){var d,e,g,h,i,j,k,c=b(".wp-full-overlay-sidebar-content");d=function(a){var i,b=a,c=f.state("expandedSection").get(),d=f.state("expandedPanel").get();if(j&&j.element&&g(j.element),!b)if(!c&&d&&d.contentContainer)b=d;else{if(d||!c||!c.contentContainer)return void(j=!1);b=c}i=b.contentContainer.find(".customize-section-title, .panel-meta").first(),i.length?(j={instance:b,element:i,parent:i.closest(".customize-pane-child"),height:e(i)},c&&h(j.element,j.parent)):j=!1},f.state("expandedSection").bind(d),f.state("expandedPanel").bind(d),c.on("scroll",_.throttle(function(){if(j){var a=c.scrollTop(),b=!k||a<=k;k=a,i(j,a,b)}},8)),g=function(a){a.hasClass("is-sticky")&&a.removeClass("is-sticky").addClass("maybe-sticky is-in-view").css("top",c.scrollTop()+"px")},h=function(a,b){a.removeClass("maybe-sticky is-in-view").css({width:"",top:""}),b.css("padding-top","")},e=function(a){var b=a.data("height");return b||(b=a.outerHeight(),a.data("height",b)),b},i=function(a,b,c){var d=a.element,e=a.parent,f=a.height,g=parseInt(d.css("top"),10),h=d.hasClass("maybe-sticky"),i=d.hasClass("is-sticky"),j=d.hasClass("is-in-view");if(!c)return i&&(g=b,d.removeClass("is-sticky").css({top:g+"px",width:""})),void(j&&b>g+f&&(d.removeClass("is-in-view"),e.css("padding-top","")));if(!h&&b>=f)h=!0,d.addClass("maybe-sticky");else if(0===b)return d.removeClass("maybe-sticky is-in-view is-sticky").css({top:"",width:""}),void e.css("padding-top","");j&&!i?g>=b&&d.addClass("is-sticky").css({top:"",width:e.outerWidth()+"px"}):h&&!j&&(d.addClass("is-in-view").css("top",b-f+"px"),e.css("padding-top",f+"px"))}}(),f.previewedDevice=new f.Value,f.bind("ready",function(){_.find(f.settings.previewableDevices,function(a,b){if(!0===a.default)return f.previewedDevice.set(b),!0})}),i.find(".devices button").on("click",function(a){f.previewedDevice.set(b(a.currentTarget).data("device"))}),f.previewedDevice.bind(function(a){var c=b(".wp-full-overlay"),d="";i.find(".devices button").removeClass("active").attr("aria-pressed",!1),i.find(".devices .preview-"+a).addClass("active").attr("aria-pressed",!0),b.each(f.settings.previewableDevices,function(a){d+=" preview-"+a}),c.removeClass(d).addClass("preview-"+a)}),e.length&&f("blogname",function(a){var c=function(){e.text(b.trim(a())||f.l10n.untitledBlogName)};a.bind(c),c()}),a=new f.Messenger({url:f.settings.url.parent,channel:"loader"}),a.bind("back",function(){g.on("click.customize-controls-close",function(b){b.preventDefault(),a.send("close")})}),b(window).on("beforeunload.customize-confirm",function(){if(!f.state("saved")())return setTimeout(function(){d.removeClass("customize-loading")},1),f.l10n.saveAlert}),b.each(["saved","change"],function(b,c){f.bind(c,function(){a.send(c)})}),f.bind("title",function(b){a.send("title",b)}),a.send("changeset-uuid",f.settings.changeset.uuid),a.send("ready"),b.each({background_image:{controls:["background_preset","background_position","background_size","background_repeat","background_attachment"],callback:function(a){return!!a}},show_on_front:{controls:["page_on_front","page_for_posts"],callback:function(a){return"page"===a}},header_textcolor:{controls:["header_textcolor"],callback:function(a){return"blank"!==a}}},function(a,c){f(a,function(a){b.each(c.controls,function(b,d){f.control(d,function(b){var d=function(a){b.container.toggle(c.callback(a))};d(a.get()),a.bind(d)})})})}),f.control("background_preset",function(a){var b,c,d,e,g,h;b={default:[!1,!1,!1,!1],fill:[!0,!1,!1,!1],fit:[!0,!1,!0,!1],repeat:[!0,!1,!1,!0],custom:[!0,!0,!0,!0]},c=[_wpCustomizeBackground.defaults["default-position-x"],_wpCustomizeBackground.defaults["default-position-y"],_wpCustomizeBackground.defaults["default-size"],_wpCustomizeBackground.defaults["default-repeat"],_wpCustomizeBackground.defaults["default-attachment"]],d={default:c,fill:["left","top","cover","no-repeat","fixed"],fit:["left","top","contain","no-repeat","fixed"],repeat:["left","top","auto","repeat","scroll"]},e=function(a){_.each(["background_position","background_size","background_repeat","background_attachment"],function(c,d){var e=f.control(c);e&&e.container.toggle(b[a][d])})},g=function(a){_.each(["background_position_x","background_position_y","background_size","background_repeat","background_attachment"],function(b,c){var e=f(b);e&&e.set(d[a][c])})},h=a.setting.get(),e(h),a.setting.bind("change",function(a){e(a),"custom"!==a&&g(a)})}),f.control("background_repeat",function(a){a.elements[0].unsync(f("background_repeat")),a.element=new f.Element(a.container.find("input")),a.element.set("no-repeat"!==a.setting()),a.element.bind(function(b){a.setting.set(b?"repeat":"no-repeat")}),a.setting.bind(function(b){a.element.set("no-repeat"!==b)})}),f.control("background_attachment",function(a){a.elements[0].unsync(f("background_attachment")),a.element=new f.Element(a.container.find("input")),a.element.set("fixed"!==a.setting()),a.element.bind(function(b){a.setting.set(b?"scroll":"fixed")}),a.setting.bind(function(b){a.element.set("fixed"!==b)})}),f.control("display_header_text",function(a){var b="";a.elements[0].unsync(f("header_textcolor")),a.element=new f.Element(a.container.find("input")),a.element.set("blank"!==a.setting()),a.element.bind(function(c){c||(b=f("header_textcolor").get()),a.setting.set(c?b:"blank")}),a.setting.bind(function(b){a.element.set("blank"!==b)})}),f("show_on_front","page_on_front",function(a,b){var c=function(){"page"===a()&&parseInt(b(),10)>0&&f.previewer.previewUrl.set(f.settings.url.home)};a.bind(c),b.bind(c)}),f("page_for_posts",function(a){a.bind(function(a){(a=parseInt(a,10))>0&&f.previewer.previewUrl.set(f.settings.url.home+"?page_id="+a)})}),f.control("custom_css",function(b){b.deferred.embedded.done(function(){var c=b.container.find("textarea"),d=c[0];c.on("blur",function(){c.data("next-tab-blurs",!1)}),c.on("keydown",function(b){var e,f,g,h=9;if(27===b.keyCode)return void(c.data("next-tab-blurs")||(c.data("next-tab-blurs",!0),b.stopPropagation()));h!==b.keyCode||b.ctrlKey||b.altKey||b.shiftKey||c.data("next-tab-blurs")||(e=d.selectionStart,f=d.selectionEnd,g=d.value,e>=0&&(d.value=g.substring(0,e).concat("\t",g.substring(f)),c.selectionStart=d.selectionEnd=e+1),b.stopPropagation(),b.preventDefault())})})}),f.control("header_video",function(a){a.deferred.embedded.done(function(){var b=function(){var c,b=f.section(a.section());b&&(c=b.container.find(".header-video-not-currently-previewable:first"),a.active.get()?c.stop().slideUp("fast"):c.stop().slideDown("fast"))};b(),a.active.bind(b)})}),f.previewer.bind("selective-refresh-setting-validities",function(b){f._handleSettingValidities({settingValidities:b,focusInvalidControl:!1})}),f.previewer.bind("focus-control-for-setting",function(a){var b=[];f.control.each(function(c){var d=_.pluck(c.settings,"id");-1!==_.indexOf(d,a)&&b.push(c)}),b.length&&(b.sort(function(a,b){return a.priority()-b.priority()}),b[0].focus())}),f.previewer.bind("refresh",function(){f.previewer.refresh()}),f.state("paneVisible").bind(function(a){var c;c=window.matchMedia?window.matchMedia("screen and ( max-width: 640px )").matches:b(window).width()<=640,f.state("editShortcutVisibility").set(a||c?"visible":"hidden")}),window.matchMedia&&window.matchMedia("screen and ( max-width: 640px )").addListener(function(){var a=f.state("paneVisible");a.callbacks.fireWith(a,[a.get(),a.get()])}),f.previewer.bind("edit-shortcut-visibility",function(a){f.state("editShortcutVisibility").set(a)}),f.state("editShortcutVisibility").bind(function(a){f.previewer.send("edit-shortcut-visibility",a)}),function(){var a,c,d,e=!1;c=function(){e||(e=!0,f.requestChangesetUpdate().always(function(){e=!1})),d()},d=function(){clearTimeout(a),a=setTimeout(function(){c()},f.settings.timeouts.changesetAutoSave)},d(),b(window).on("blur.wp-customize-changeset-update",function(){c()}),b(window).on("beforeunload.wp-customize-changeset-update",function(){c()})}(),f.trigger("ready")}})}(wp,jQuery);